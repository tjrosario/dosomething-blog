box: blisteringherb/scholarship@0.0.6
# Build definition
build:
  steps:
    - script:
        name: install bundler
        code: sudo gem install bundler
    - script:
        name: install grunt
        code: sudo npm install grunt -g
    - script:
        name: install grunt
        code: sudo npm install grunt-cli -g
    - script:
        name: Build theme
        code: cd wp-content/themes/dosomething-blog && ./scripts/build-staging.sh
deploy:
  steps:
    - bundle-install
    - script:
        name: write env var
        code: |-
          export CAP_PRIVATE_KEY=`mktemp`
          echo -e $WERCKER_APP_KEY_PRIVATE > $CAP_PRIVATE_KEY
    - cap
  after-steps:
    - hipchat-notify:
        token: $HIPCHAT_TOKEN
        room-id: $HIPCHAT_ROOM_ID
        from-name: wercker
